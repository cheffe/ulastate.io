<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulastate - Fruit Value Calculator</title>
    <link rel="shortcut icon" type="image/png" href="favicon.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .language-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            opacity: 0.33;
            transition: opacity 0.3s ease;
        }

        .language-selector:hover,
        .language-selector:focus-within {
            opacity: 1;
        }

        .language-selector select {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .language-selector select:hover {
            border-color: #667eea;
        }

        .language-selector select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            background: white;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            border-color: #667eea;
            background: #f5f7ff;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            cursor: pointer;
        }

        .checkbox-item label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
            font-size: 14px;
        }

        .result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            text-align: center;
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-width: 150px;
        }

        .result.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 36px;
            font-weight: bold;
        }

        .result-divider {
            border-top: 2px dashed rgba(255, 255, 255, 0.5);
            margin: 10px 0;
        }

        .result-potential-label {
            font-size: 10px;
            opacity: 0.8;
            margin-bottom: 3px;
        }

        .result-potential-value {
            font-size: 18px;
            font-weight: 600;
            opacity: 0.9;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .checkbox-group {
                grid-template-columns: 1fr 1fr;
            }

            .result {
                top: 10px;
                right: 10px;
                padding: 10px 15px;
                min-width: 120px;
            }

            .result-label {
                font-size: 12px;
            }

            .result-value {
                font-size: 28px;
            }

            .result-potential-value {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="language-selector">
        <select id="languageSelect" aria-label="Language">
            <option value="en">üá¨üáß</option>
            <option value="de">üá©üá™</option>
            <option value="es">üá™üá∏</option>
            <option value="fr">üá´üá∑</option>
        </select>
    </div>

    <div class="container">
        <h1>üçé Ulastate</h1>

        <form id="fruitForm">
            <div class="form-group">
                <label for="fruitType" data-i18n="label.fruitType">Fruit Type</label>
                <select id="fruitType" required>
                    <option value="" data-i18n="option.selectFruit">Select a fruit...</option>
                    <option value="apple" data-i18n="fruit.apple">Apple</option>
                    <option value="lip" data-i18n="fruit.lip">Big-Lip Fruit</option>
                    <option value="bbell" data-i18n="fruit.bbell">Bluebell</option>
                    <option value="cactus" data-i18n="fruit.cactus">Cactus</option>
                    <option value="carrot" data-i18n="fruit.carrot">Carrot</option>
                    <option value="chomper" data-i18n="fruit.chomper">Chomper</option>
                    <option value="dandelion" data-i18n="fruit.dandelion">Dandelion</option>
                    <option value="gberry" data-i18n="fruit.gberry">Goldenberry</option>
                    <option value="iron" data-i18n="fruit.iron">Ironwood Fruit</option>
                    <option value="pea" data-i18n="fruit.pea">Pea</option>
                    <option value="pitcher" data-i18n="fruit.pitcher">Pitcher Plant</option>
                    <option value="pumpkin" data-i18n="fruit.pumpkin">Pumpkin</option>
                    <option value="pbell" data-i18n="fruit.pbell">Pinkbell</option>
                    <option value="raffle" data-i18n="fruit.raffle">Rafflesia</option>
                    <option value="mushroom" data-i18n="fruit.mushroom">Red Mushroom</option>
                    <option value="saturn" data-i18n="fruit.saturn">Saturn Peach</option>
                    <option value="sakura" data-i18n="fruit.sakura">Sakura</option>
                    <option value="lotus" data-i18n="fruit.lotus">Snow Lotus</option>
                    <option value="strawberry" data-i18n="fruit.strawberry">Strawberry</option>
                    <option value="melon" data-i18n="fruit.melon">Winter Melon</option>
                </select>
            </div>

            <div class="form-group">
                <label for="weight" data-i18n="label.weight">Weight</label>
                <input type="number" id="weight" step="0.01" min="0" data-i18n-placeholder="placeholder.weight" placeholder="e.g., 10.2 or 5.96" required>
            </div>

            <div class="form-group">
                <label for="mutation" data-i18n="label.mutation">Mutation</label>
                <select id="mutation" required>
                    <option value="none" data-i18n="mutation.none">None</option>
                    <option value="gold" data-i18n="mutation.gold">Gold</option>
                    <option value="prismatic" data-i18n="mutation.prismatic">Prismatic</option>
                </select>
            </div>

            <div class="form-group">
                <label data-i18n="label.weatherEffects">Weather Effects (select multiple)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="dust" name="weather" value="dust">
                        <label for="dust" data-i18n="weather.dust">Dust</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="lightning" name="weather" value="lightning">
                        <label for="lightning" data-i18n="weather.lightning">Lightning</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="rainbow" name="weather" value="rainbow">
                        <label for="rainbow" data-i18n="weather.rainbow">Rainbow</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="terror" name="weather" value="terror">
                        <label for="terror" data-i18n="weather.terror">Terror</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="air" name="weather" value="air">
                        <label for="air" data-i18n="weather.air">Air</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="hazy" name="weather" value="hazy">
                        <label for="hazy" data-i18n="weather.hazy">Hazy</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="cold" name="weather" value="cold">
                        <label for="cold" data-i18n="weather.cold">Cold</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="moist" name="weather" value="moist">
                        <label for="moist" data-i18n="weather.moist">Moist</label>
                    </div>
                </div>
            </div>
        </form>

        <div id="result" class="result">
            <div class="result-label" data-i18n="result.fruitValue">Fruit Value</div>
            <div class="result-value" id="resultValue">0</div>
            <div class="result-divider"></div>
            <div class="result-potential-label" data-i18n="result.potential">Potential</div>
            <div class="result-potential-value" id="resultPotential">0</div>
        </div>
    </div>

    <script>
        // Translations
        const translations = {
            en: {
                title: "Ulastate - Fruit Value Calculator",
                'label.fruitType': "Fruit Type",
                'option.selectFruit': "Select a fruit...",
                'label.weight': "Weight",
                'placeholder.weight': "e.g., 10.2 or 5.96",
                'label.mutation': "Mutation",
                'label.weatherEffects': "Weather Effects (select multiple)",
                'result.fruitValue': "Fruit Value",
                'result.potential': "Potential",
                'alert.fillFields': "Please fill in all required fields with valid values.",
                'fruit.apple': "Apple",
                'fruit.lip': "Big-Lip Fruit",
                'fruit.bbell': "Bluebell",
                'fruit.cactus': "Cactus",
                'fruit.carrot': "Carrot",
                'fruit.chomper': "Chomper",
                'fruit.dandelion': "Dandelion",
                'fruit.gberry': "Goldenberry",
                'fruit.iron': "Ironwood Fruit",
                'fruit.pea': "Pea",
                'fruit.pitcher': "Pitcher Plant",
                'fruit.pumpkin': "Pumpkin",
                'fruit.pbell': "Pinkbell",
                'fruit.raffle': "Rafflesia",
                'fruit.mushroom': "Red Mushroom",
                'fruit.saturn': "Saturn Peach",
                'fruit.sakura': "Sakura",
                'fruit.lotus': "Snow Lotus",
                'fruit.strawberry': "Strawberry",
                'fruit.melon': "Winter Melon",
                'mutation.none': "None",
                'mutation.gold': "Gold",
                'mutation.prismatic': "Prismatic",
                'weather.dust': "Dust",
                'weather.lightning': "Lightning",
                'weather.rainbow': "Rainbow",
                'weather.terror': "Terror",
                'weather.air': "Air",
                'weather.hazy': "Hazy",
                'weather.cold': "Cold",
                'weather.moist': "Moist"
            },
            de: {
                title: "Ulastate - Fruchtwert-Rechner",
                'label.fruitType': "Fruchtart",
                'option.selectFruit': "W√§hlen Sie eine Frucht...",
                'label.weight': "Gewicht",
                'placeholder.weight': "z.B., 10.2 oder 5.96",
                'label.mutation': "Mutation",
                'label.weatherEffects': "Wettereffekte (mehrere ausw√§hlen)",
                'result.fruitValue': "Fruchtwert",
                'result.potential': "Potenzial",
                'alert.fillFields': "Bitte f√ºllen Sie alle erforderlichen Felder mit g√ºltigen Werten aus.",
                'fruit.apple': "Apfel",
                'fruit.lip': "Gro√ülippen-Frucht",
                'fruit.bbell': "Glockenblume",
                'fruit.cactus': "Kaktus",
                'fruit.carrot': "Karotte",
                'fruit.chomper': "Bei√üer",
                'fruit.dandelion': "L√∂wenzahn",
                'fruit.gberry': "Goldbeere",
                'fruit.iron': "Eisenholz-Frucht",
                'fruit.pea': "Erbse",
                'fruit.pitcher': "Kannenpflanze",
                'fruit.pumpkin': "K√ºrbis",
                'fruit.pbell': "Rosaglocke",
                'fruit.raffle': "Rafflesia",
                'fruit.mushroom': "Roter Pilz",
                'fruit.saturn': "Saturn-Pfirsich",
                'fruit.sakura': "Sakura",
                'fruit.lotus': "Schneelotus",
                'fruit.strawberry': "Erdbeere",
                'fruit.melon': "Wintermelone",
                'mutation.none': "Keine",
                'mutation.gold': "Gold",
                'mutation.prismatic': "Prismatisch",
                'weather.dust': "Staub",
                'weather.lightning': "Blitz",
                'weather.rainbow': "Regenbogen",
                'weather.terror': "Terror",
                'weather.air': "Luft",
                'weather.hazy': "Neblig",
                'weather.cold': "Kalt",
                'weather.moist': "Feucht"
            },
            es: {
                title: "Ulastate - Calculadora de Valor de Frutas",
                'label.fruitType': "Tipo de Fruta",
                'option.selectFruit': "Seleccione una fruta...",
                'label.weight': "Peso",
                'placeholder.weight': "ej., 10.2 o 5.96",
                'label.mutation': "Mutaci√≥n",
                'label.weatherEffects': "Efectos Clim√°ticos (seleccione varios)",
                'result.fruitValue': "Valor de Fruta",
                'result.potential': "Potencial",
                'alert.fillFields': "Por favor, complete todos los campos obligatorios con valores v√°lidos.",
                'fruit.apple': "Manzana",
                'fruit.lip': "Fruta de Labios Grandes",
                'fruit.bbell': "Campanilla Azul",
                'fruit.cactus': "Cactus",
                'fruit.carrot': "Zanahoria",
                'fruit.chomper': "Masticador",
                'fruit.dandelion': "Diente de Le√≥n",
                'fruit.gberry': "Baya Dorada",
                'fruit.iron': "Fruta de Palo de Hierro",
                'fruit.pea': "Guisante",
                'fruit.pitcher': "Planta Jarra",
                'fruit.pumpkin': "Calabaza",
                'fruit.pbell': "Campanilla Rosa",
                'fruit.raffle': "Rafflesia",
                'fruit.mushroom': "Seta Roja",
                'fruit.saturn': "Durazno Saturno",
                'fruit.sakura': "Sakura",
                'fruit.lotus': "Loto de Nieve",
                'fruit.strawberry': "Fresa",
                'fruit.melon': "Mel√≥n de Invierno",
                'mutation.none': "Ninguna",
                'mutation.gold': "Oro",
                'mutation.prismatic': "Prism√°tico",
                'weather.dust': "Polvo",
                'weather.lightning': "Rel√°mpago",
                'weather.rainbow': "Arco√≠ris",
                'weather.terror': "Terror",
                'weather.air': "Aire",
                'weather.hazy': "Brumoso",
                'weather.cold': "Fr√≠o",
                'weather.moist': "H√∫medo"
            },
            fr: {
                title: "Ulastate - Calculateur de Valeur des Fruits",
                'label.fruitType': "Type de Fruit",
                'option.selectFruit': "S√©lectionnez un fruit...",
                'label.weight': "Poids",
                'placeholder.weight': "ex., 10.2 ou 5.96",
                'label.mutation': "Mutation",
                'label.weatherEffects': "Effets M√©t√©orologiques (s√©lectionnez plusieurs)",
                'result.fruitValue': "Valeur du Fruit",
                'result.potential': "Potentiel",
                'alert.fillFields': "Veuillez remplir tous les champs obligatoires avec des valeurs valides.",
                'fruit.apple': "Pomme",
                'fruit.lip': "Fruit √† Grosses L√®vres",
                'fruit.bbell': "Campanule Bleue",
                'fruit.cactus': "Cactus",
                'fruit.carrot': "Carotte",
                'fruit.chomper': "Broyeur",
                'fruit.dandelion': "Pissenlit",
                'fruit.gberry': "Baie Dor√©e",
                'fruit.iron': "Fruit de Bois de Fer",
                'fruit.pea': "Pois",
                'fruit.pitcher': "Plante Carnivore",
                'fruit.pumpkin': "Citrouille",
                'fruit.pbell': "Campanule Rose",
                'fruit.raffle': "Rafflesia",
                'fruit.mushroom': "Champignon Rouge",
                'fruit.saturn': "P√™che de Saturne",
                'fruit.sakura': "Sakura",
                'fruit.lotus': "Lotus des Neiges",
                'fruit.strawberry': "Fraise",
                'fruit.melon': "Melon d'Hiver",
                'mutation.none': "Aucune",
                'mutation.gold': "Or",
                'mutation.prismatic': "Prismatique",
                'weather.dust': "Poussi√®re",
                'weather.lightning': "Foudre",
                'weather.rainbow': "Arc-en-ciel",
                'weather.terror': "Terreur",
                'weather.air': "Air",
                'weather.hazy': "Brumeux",
                'weather.cold': "Froid",
                'weather.moist': "Humide"
            }
        };

        // Current language
        // Current language - will be set in DOMContentLoaded
        let currentLanguage = 'en';

        // Translation function
        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }

        // Update page translations
        function updateTranslations() {
            document.title = t('title');
            document.documentElement.lang = currentLanguage;

            // Update all elements with data-i18n attribute
            // Note: Setting textContent on select option elements updates the visible text
            // while preserving the value attribute for form submission
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                element.textContent = t(key);
            });

            // Update placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                element.placeholder = t(key);
            });
        }

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set current language from localStorage or default to 'en'
            currentLanguage = localStorage.getItem('language') || 'en';
            
            // Set the dropdown to the current language
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.value = currentLanguage;
            
            // Apply translations
            updateTranslations();
            
            // Language selector event listener
            languageSelect.addEventListener('change', function() {
                const lang = this.value;
                currentLanguage = lang;
                localStorage.setItem('language', lang);
                
                // Update translations
                updateTranslations();
                
                // Reduce opacity after selection
                const selector = document.querySelector('.language-selector');
                selector.style.opacity = '1';
                setTimeout(() => {
                    selector.style.opacity = '0.33';
                }, 1000);
            });
        });

        // Base prices for each fruit type
        const basePrices = {
            sakura: 5,
            saturn: 6,
            lip: 7.5,
            raffle: 41.67,
            lotus: 93.75,
            gberry: 16,
            pbell: 4.17,
            bbell: 4.17,
            iron: 64,
            pea: 2.22,
            cactus: 6.86,
            chomper: 25,
            melon: 20.8,
            pumpkin: 3.1,
            pitcher: 795,
            apple: 75,
            mushroom: 310,
            dandelion: 5000,
            strawberry: 74.75,
            carrot: 40
        };
        
        // Default weight for each fruit type
        const defaultWeights = {
            sakura: 8,
            saturn: 7,
            lip: 6,
            raffle: 16,
            lotus: 10,
            gberry: 14,
            pbell: 11,
            bbell: 13,
            iron: 8,
            pea: 9,
            cactus: 8,
            chomper: 3.5,
            melon: 2,
            pumpkin: 5,
            pitcher: 0.17,
            apple: 0.3,
            mushroom: 0.5,
            dandelion: 0.15,
            strawberry: 0.3,
            carrot: 1.2
        };

        // Mutation multipliers
        const mutationMultipliers = {
            none: 1.0,
            gold: 20,
            prismatic: 50
        };

        // Weather effect multipliers
        const weatherMultipliers = {
            dust: 10,
            lightning: 10,
            rainbow: 10,
            terror: 10,
            air: 5,
            hazy: 5,
            cold: 3,
            moist: 2
        };

        document.getElementById('fruitType').addEventListener('change', function() {
            const fruitType = document.getElementById('fruitType').value;
            document.getElementById('weight').value = defaultWeights[fruitType];
        });

        document.getElementById('fruitForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateFruitValue();
        });

        function calculateFruitValue() {
            // Get form values
            const fruitType = document.getElementById('fruitType').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const mutation = document.getElementById('mutation').value;
            
            // Get selected weather effects
            const weatherCheckboxes = document.querySelectorAll('input[name="weather"]:checked');
            const selectedWeather = Array.from(weatherCheckboxes).map(cb => cb.value);

            // Validate inputs
            if (!fruitType || isNaN(weight) || weight <= 0) {
                alert(t('alert.fillFields'));
                return;
            }

            // Calculate base value
            const weightValue = basePrices[fruitType] * (weight * weight);

            // mutation factor
            const mutationFactor = mutationMultipliers[mutation];

            // collect weather effect multipliers for current value
            let weatherFactor = 0;
            selectedWeather.forEach(weather => {
                weatherFactor += weatherMultipliers[weather];
            });
            weatherFactor = Math.max(weatherFactor, 1);
            
            const value = Math.floor(weightValue * mutationFactor * weatherFactor);
            const numberToDisplay = new Intl.NumberFormat().format(value);

            // Calculate potential value (with all weather effects)
            let allWeatherFactor = 0;
            Object.keys(weatherMultipliers).forEach(weather => {
                allWeatherFactor += weatherMultipliers[weather];
            });
            allWeatherFactor = Math.max(allWeatherFactor, 1);
            
            const potentialValue = Math.floor(weightValue * mutationFactor * allWeatherFactor);
            const potentialToDisplay = new Intl.NumberFormat().format(potentialValue);

            // Display result
            document.getElementById('resultValue').textContent = numberToDisplay;
            document.getElementById('resultPotential').textContent = potentialToDisplay;
            document.getElementById('result').classList.add('show');
        }

        // Auto-calculate on any input change (optional enhancement)
        const inputs = document.querySelectorAll('select, input');
        inputs.forEach(input => {
            input.addEventListener('change', function() {
                const form = document.getElementById('fruitForm');
                if (form.checkValidity()) {
                    calculateFruitValue();
                }
            });
        });

        // Make checkbox-item divs clickable for better mobile experience
        const checkboxItems = document.querySelectorAll('.checkbox-item');
        checkboxItems.forEach(item => {
            item.addEventListener('click', function(e) {
                // Don't toggle if the click was directly on the checkbox or label
                // (they handle it themselves)
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'LABEL') {
                    return;
                }
                // Find the checkbox inside this item and toggle it
                const checkbox = this.querySelector('input[type="checkbox"]');
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                    // Trigger change event for auto-calculation
                    checkbox.dispatchEvent(new Event('change'));
                }
            });
        });
    </script>
</body>
</html>
